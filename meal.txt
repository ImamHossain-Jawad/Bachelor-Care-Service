<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Meal Plan - Bachelor Care Service</title>
<style>
*{box-sizing:border-box;font-family:Poppins,Arial,Helvetica,sans-serif}
body{margin:0;min-height:100vh;background:#000;color:#fff;display:flex;flex-direction:column}
header{background:#111;padding:18px 30px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 0 15px rgba(255,255,255,0.06)}
header h1{color:#ff6600;margin:0;font-size:26px}
.nav-btns button{
  background:#ff6600;border:none;color:#fff;padding:10px 18px;border-radius:8px;margin-left:10px;
  cursor:pointer;font-weight:600;transition:0.3s;
}
.nav-btns button:hover{background:#ff8533;transform:scale(1.05)}

main{width:90%;max-width:1000px;margin:40px auto;flex:1;text-align:center}
h2.section-title{color:#ff6600;margin-bottom:25px;font-size:26px;text-align:center}

.meal-buttons{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:20px;
  justify-items:center;
  margin-bottom:40px;
}

.meal-buttons button{
  background:linear-gradient(135deg,#ff6600,#ff3300);
  color:#fff;
  border:none;
  padding:20px 25px;
  border-radius:14px;
  cursor:pointer;
  font-size:18px;
  font-weight:600;
  width:100%;
  box-shadow:0 0 20px rgba(255,100,0,0.3);
  transition:all 0.3s ease;
}
.meal-buttons button:hover{
  background:linear-gradient(135deg,#ff8533,#ff6600);
  transform:scale(1.07);
  box-shadow:0 0 35px rgba(255,120,0,0.5);
}

.weekly-btn{
  background:#ff6600;color:#fff;font-size:18px;font-weight:700;padding:16px 35px;border-radius:12px;margin-bottom:25px;cursor:pointer;transition:0.3s;
}
.weekly-btn:hover{background:#ff8533;transform:scale(1.05);}

.plan-table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
  background:#111;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 0 15px rgba(255,255,255,0.05);
}
.plan-table th, .plan-table td{
  border:1px solid #222;
  padding:10px;
  text-align:center;
  vertical-align:top;
}
.plan-table th{background:#ff6600;color:#fff;}
.plan-table td{color:#eee;min-width:150px;}

.total-box{
  background:#111;
  border-radius:12px;
  padding:20px;
  box-shadow:0 0 15px rgba(255,255,255,0.05);
  color:#ff6600;
  font-size:22px;
  font-weight:600;
  width:fit-content;
  margin:20px auto 0;
}

.bottom-buttons{
  display:flex;
  justify-content:center;
  gap:15px;
  margin-top:20px;
  flex-wrap:wrap;
}

.bottom-buttons button{
  padding:12px 24px;
  border:none;
  border-radius:10px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
}

.reset-btn{background:#444;color:#fff;}
.reset-btn:hover{background:#666;transform:scale(1.05)}
.pay-btn{background:#ff3300;color:#fff;}
.pay-btn:hover{background:#ff5522;transform:scale(1.05)}

footer{margin-top:auto;background:#0a0a0a;padding:14px;text-align:center;color:#777;border-top:1px solid #222}

.edit-btn{
  background:#ff8533;color:#fff;border:none;padding:3px 6px;margin:2px;border-radius:5px;cursor:pointer;font-size:12px;
}
.edit-btn:hover{background:#ffaa66;}
.options-container{
  margin-top:5px;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:5px;
}
.options-container button{
  background:#444;color:#fff;border:none;padding:5px 8px;border-radius:5px;cursor:pointer;font-size:12px;
  transition:0.2s;
}
.options-container button:hover{background:#ff6600;}
</style>
</head>
<body>
<header>
  <h1>üçΩÔ∏è Meal Plan</h1>
  <div class="nav-btns">
    <button onclick="goHome()">üè† Home</button>
    <button onclick="goLaundry()">üß∫ Laundry</button>
    <button onclick="logout()">Logout</button>
  </div>
</header>

<main>
<h2 class="section-title">üáßüá© Bangla Meal Items</h2>
<div class="meal-buttons">
  <button onclick="addMeal('‡¶≠‡¶æ‡¶§',30)">üçö ‡¶≠‡¶æ‡¶§ - ‡ß≥30</button>
  <button onclick="addMeal('‡¶Æ‡¶æ‡¶õ',50)">üêü ‡¶Æ‡¶æ‡¶õ - ‡ß≥50</button>
  <button onclick="addMeal('‡¶°‡¶æ‡¶≤',30)">ü•£ ‡¶°‡¶æ‡¶≤ - ‡ß≥30</button>
  <button onclick="addMeal('‡¶ö‡¶ø‡¶ï‡ßá‡¶®',70)">üçó ‡¶ö‡¶ø‡¶ï‡ßá‡¶® - ‡ß≥70</button>
  <button onclick="addMeal('‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏',90)">ü•© ‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏ - ‡ß≥90</button>
  <button onclick="addMeal('‡¶∏‡¶¨‡¶ú‡¶ø',25)">ü•¨ ‡¶∏‡¶¨‡¶ú‡¶ø - ‡ß≥25</button>
  <button onclick="addMeal('‡¶°‡¶ø‡¶Æ',20)">üç≥ ‡¶°‡¶ø‡¶Æ - ‡ß≥20</button>
  <button onclick="addMeal('‡¶°‡¶ø‡¶Æ ‡¶≠‡¶æ‡¶ú‡¶ø',40)">üç≥ ‡¶°‡¶ø‡¶Æ ‡¶≠‡¶æ‡¶ú‡¶ø - ‡ß≥40</button>
  <button onclick="addMeal('‡¶Ü‡¶≤‡ßÅ ‡¶≠‡¶∞‡ßç‡¶§‡¶æ',20)">ü•î ‡¶Ü‡¶≤‡ßÅ ‡¶≠‡¶∞‡ßç‡¶§‡¶æ - ‡ß≥20</button>
  <button onclick="addMeal('‡¶á‡¶≤‡¶ø‡¶∂ ‡¶Æ‡¶æ‡¶õ',150)">üêü ‡¶á‡¶≤‡¶ø‡¶∂ ‡¶Æ‡¶æ‡¶õ - ‡ß≥150</button>
  <button onclick="addMeal('‡¶¨‡¶ø‡¶´ ‡¶≠‡ßÅ‡¶®‡¶æ',120)">üçñ ‡¶¨‡¶ø‡¶´ ‡¶≠‡ßÅ‡¶®‡¶æ - ‡ß≥120</button>
  <button onclick="addMeal('‡¶∞‡ßÅ‡¶ü‡¶ø',20)">ü•ê ‡¶∞‡ßÅ‡¶ü‡¶ø - ‡ß≥20</button>
  <button onclick="addMeal('‡¶™‡¶æ‡¶â‡¶∞‡ßÅ‡¶ü‡¶ø',15)">ü•ñ ‡¶™‡¶æ‡¶â‡¶∞‡ßÅ‡¶ü‡¶ø - ‡ß≥15</button>
  <button onclick="addMeal('‡¶ñ‡¶ø‡¶ö‡ßÅ‡ßú‡¶ø',60)">üç≤ ‡¶ñ‡¶ø‡¶ö‡ßÅ‡ßú‡¶ø - ‡ß≥60</button>
  <button onclick="addMeal('‡¶™‡¶∞‡ßã‡¶ü‡¶æ',25)">ü•û ‡¶™‡¶∞‡ßã‡¶ü‡¶æ - ‡ß≥25</button>
  <button onclick="addMeal('‡¶™‡ßã‡¶≤‡¶æ‡¶ì',80)">üçö ‡¶™‡ßã‡¶≤‡¶æ‡¶ì - ‡ß≥80</button>
  <button onclick="addMeal('‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø',70)">üçó ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø - ‡ß≥70</button>
  <button onclick="addMeal('‡¶ï‡¶≤‡¶æ',10)">üçå ‡¶ï‡¶≤‡¶æ - ‡ß≥10</button>
</div>

<button class="weekly-btn" onclick="renderWeeklyPlan()">üåü Show/Edit Best Weekly Plan</button>

<div id="planContainer"></div>

<div class="total-box" id="totalBox">Total: ‡ß≥0</div>

<div class="bottom-buttons">
  <button class="reset-btn" onclick="resetTotal()">Reset</button>
  <button class="pay-btn" onclick="payNow()">Pay Now</button>
</div>
</main>

<footer>¬© 2025 Bachelor Care Service</footer>

<script>
const current = localStorage.getItem('bachelor_current');
const users = JSON.parse(localStorage.getItem('bachelor_users') || '[]');
if (!current) { window.location.href = 'index.html'; }
const user = users.find(u => u.email === current);
if (!user) { localStorage.removeItem('bachelor_current'); window.location.href = 'index.html'; }

const mealKey = 'meal_total_' + user.email;
const budgetKey = 'bachelor_total_' + user.email;
let mealTotal = parseFloat(localStorage.getItem(mealKey)) || 0;
let budgetTotal = parseFloat(localStorage.getItem(budgetKey)) || 0;
const totalBox = document.getElementById('totalBox');
const planContainer = document.getElementById('planContainer');
updateTotal();

const prices = {
  '‡¶≠‡¶æ‡¶§':30,'‡¶Æ‡¶æ‡¶õ':50,'‡¶°‡¶æ‡¶≤':30,'‡¶ö‡¶ø‡¶ï‡ßá‡¶®':70,'‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏':90,'‡¶∏‡¶¨‡¶ú‡¶ø':25,
  '‡¶°‡¶ø‡¶Æ':20,'‡¶°‡¶ø‡¶Æ ‡¶≠‡¶æ‡¶ú‡¶ø':40,'‡¶Ü‡¶≤‡ßÅ ‡¶≠‡¶∞‡ßç‡¶§‡¶æ':20,'‡¶á‡¶≤‡¶ø‡¶∂ ‡¶Æ‡¶æ‡¶õ':150,'‡¶¨‡¶ø‡¶´ ‡¶≠‡ßÅ‡¶®‡¶æ':120,
  '‡¶∞‡ßÅ‡¶ü‡¶ø':20,'‡¶™‡¶æ‡¶â‡¶∞‡ßÅ‡¶ü‡¶ø':15,'‡¶ñ‡¶ø‡¶ö‡ßÅ‡ßú‡¶ø':60,'‡¶™‡¶∞‡ßã‡¶ü‡¶æ':25,'‡¶™‡ßã‡¶≤‡¶æ‡¶ì':80,'‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø':70,'‡¶ï‡¶≤‡¶æ':10
};

// Weekly plan
let weeklyMeals = [
  ['‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞',['‡¶∞‡ßÅ‡¶ü‡¶ø','‡¶°‡¶ø‡¶Æ'],['‡¶≠‡¶æ‡¶§','‡¶°‡¶æ‡¶≤','‡¶∏‡¶¨‡¶ú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶Æ‡¶æ‡¶õ','‡¶°‡¶ø‡¶Æ ‡¶≠‡¶æ‡¶ú‡¶ø']],
  ['‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞',['‡¶™‡¶æ‡¶â‡¶∞‡ßÅ‡¶ü‡¶ø','‡¶ï‡¶≤‡¶æ'],['‡¶≠‡¶æ‡¶§','‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø','‡¶∏‡¶¨‡¶ú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏']],
  ['‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞',['‡¶ñ‡¶ø‡¶ö‡ßÅ‡ßú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶°‡¶æ‡¶≤','‡¶∏‡¶¨‡¶ú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶ö‡¶ø‡¶ï‡ßá‡¶®']],
  ['‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞',['‡¶™‡¶∞‡ßã‡¶ü‡¶æ','‡¶°‡¶ø‡¶Æ'],['‡¶≠‡¶æ‡¶§','‡¶Æ‡¶æ‡¶õ','‡¶∏‡¶¨‡¶ú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶¨‡¶ø‡¶´ ‡¶≠‡ßÅ‡¶®‡¶æ']],
  ['‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞',['‡¶™‡ßã‡¶≤‡¶æ‡¶ì','‡¶°‡¶ø‡¶Æ'],['‡¶≠‡¶æ‡¶§','‡¶á‡¶≤‡¶ø‡¶∂ ‡¶Æ‡¶æ‡¶õ'],['‡¶≠‡¶æ‡¶§','‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶æ‡¶Ç‡¶∏']],
  ['‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞',['‡¶∞‡ßÅ‡¶ü‡¶ø','‡¶∏‡¶¨‡¶ú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶°‡¶æ‡¶≤','‡¶°‡¶ø‡¶Æ'],['‡¶≠‡¶æ‡¶§','‡¶ö‡¶ø‡¶ï‡ßá‡¶®']],
  ['‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞',['‡¶ñ‡¶ø‡¶ö‡ßÅ‡ßú‡¶ø'],['‡¶≠‡¶æ‡¶§','‡¶Æ‡¶æ‡¶õ','‡¶°‡¶ø‡¶Æ'],['‡¶≠‡¶æ‡¶§','‡¶∏‡¶¨‡¶ú‡¶ø','‡¶Ü‡¶≤‡ßÅ ‡¶≠‡¶∞‡ßç‡¶§‡¶æ']]
];

function sumMealArray(arr){ return arr.reduce((a,item)=>a+(prices[item]||0),0); }

function renderWeeklyPlan(){
  let totalCost=0;
  let table = `<table class='plan-table'><tr><th>‡¶¶‡¶ø‡¶®</th><th>‡¶∏‡¶ï‡¶æ‡¶≤</th><th>‡¶¶‡ßÅ‡¶™‡ßÅ‡¶∞</th><th>‡¶∞‡¶æ‡¶§</th><th>‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü</th></tr>`;
  
  weeklyMeals.forEach((day,dayIndex)=>{
    const [dayName,b,l,d] = day;
    const dayTotal = sumMealArray(b)+sumMealArray(l)+sumMealArray(d);
    totalCost += dayTotal;

    const renderCell = (mealArray,mealIndex)=>{
      let html = mealArray.map(m=>`${m} (‡ß≥${prices[m]})`).join(', ');
      html += `<div class="options-container" id="options-${dayIndex}-${mealIndex}"></div>`;
      html += `<button class="edit-btn" onclick="showAddOptions(${dayIndex},${mealIndex})">+ Add</button>`;
      html += `<button class="edit-btn" onclick="showRemoveOptions(${dayIndex},${mealIndex})">‚ùå Remove</button>`;
      return html;
    }

    table += `<tr>
      <td>${dayName}</td>
      <td>${renderCell(b,0)}</td>
      <td>${renderCell(l,1)}</td>
      <td>${renderCell(d,2)}</td>
      <td>‡ß≥${dayTotal}</td>
    </tr>`;
  });
  table += `<tr><th colspan="4">‡¶Æ‡ßã‡¶ü ‡ß≠ ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶ñ‡¶∞‡¶ö</th><th>‡ß≥${totalCost}</th></tr></table>`;
  planContainer.innerHTML = table;

  mealTotal = totalCost;
  localStorage.setItem(mealKey,mealTotal);
  updateTotal();
}

function showAddOptions(dayIndex,mealIndex){
  const container = document.getElementById(`options-${dayIndex}-${mealIndex}`);
  container.innerHTML='';
  Object.keys(prices).forEach(meal=>{
    const btn = document.createElement('button');
    btn.textContent = `${meal} (‡ß≥${prices[meal]})`;
    btn.onclick = ()=>{
      weeklyMeals[dayIndex][mealIndex].push(meal);
      renderWeeklyPlan();
    };
    container.appendChild(btn);
  });
}

function showRemoveOptions(dayIndex,mealIndex){
  const container = document.getElementById(`options-${dayIndex}-${mealIndex}`);
  container.innerHTML='';
  weeklyMeals[dayIndex][mealIndex].forEach((meal,i)=>{
    const btn = document.createElement('button');
    btn.textContent = `${meal} (‡ß≥${prices[meal]})`;
    btn.onclick = ()=>{
      weeklyMeals[dayIndex][mealIndex].splice(i,1);
      renderWeeklyPlan();
    };
    container.appendChild(btn);
  });
}

function addMeal(name,price){
  mealTotal += price;
  localStorage.setItem(mealKey,mealTotal);
  updateTotal();
  alert(`${name} ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (‡ß≥${price})`);
}

function resetTotal(){
  if(confirm('Reset your meal total?')){
    mealTotal=0;
    planContainer.innerHTML='';
    localStorage.setItem(mealKey,mealTotal);
    updateTotal();
  }
}

function payNow(){
  if(mealTotal<=0){ alert('‡¶ï‡ßã‡¶®‡ßã ‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø!'); return; }
  if(budgetTotal<mealTotal){ alert('‚ùå ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú ‡¶ü‡ßã‡¶ü‡¶æ‡¶≤‡ßá!'); return; }
  budgetTotal -= mealTotal;
  localStorage.setItem(budgetKey,budgetTotal);
  alert(`‚úÖ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡ß≥${mealTotal}!`);
  mealTotal=0;
  planContainer.innerHTML='';
  localStorage.setItem(mealKey,mealTotal);
  updateTotal();
}

function updateTotal(){ totalBox.textContent='Total: ‡ß≥'+mealTotal.toFixed(2); }
function goHome(){ window.location.href='home.html'; }
function goLaundry(){ window.location.href='laundry.html'; }
function logout(){ localStorage.removeItem('bachelor_current'); alert('You have been logged out successfully!'); window.location.href='Login.html'; }
</script>
</body>
</html>
